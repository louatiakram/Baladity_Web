{% extends 'base-front.html.twig' %}

{% block title %}Ajouter avis{% endblock %}

{% block body %}
<div class="breadcrumbs">
  <div class="page-header d-flex align-items-center" style="background-image: url('{{ asset('images/1698797913755.jfif') }}');">
    <div class="container position-relative">
      <div class="row d-flex justify-content-center">
        <div class="col-lg-6 text-center">
          <h2>Avis</h2>
          <p>
            L'avis sur l'équipement est un retour d'expérience ou une évaluation fournie par les employés concernant un équipement spécifique. Il peut inclure des commentaires sur les performances, la qualité, l'utilité ou d'autres aspects pertinents de l'équipement, permettant ainsi aux autres employés potentiels de prendre des décisions éclairées.
          </p>
        </div>
      </div>
    </div>
  </div>  
{% endblock %}

{% block rest%}
<section class="section">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Ajouter un avis</h5>
          <form method="POST" action="{{ path('ajouterAvisFront', {'id': equipement.getIdEquipement()}) }}" enctype="multipart/form-data">
            {{ form_start(form, {'attr': {'class': 'row g-3', 'novalidate': 'novalidate'}}) }}

            <div class="mb-3">
              <label for="inputReference" class="form-label">Note</label>
              <!-- Star rating -->
              <div class="star-rating">
                <i class="star fas fa-star" data-rating="1"></i>
                <i class="star fas fa-star" data-rating="2"></i>
                <i class="star fas fa-star" data-rating="3"></i>
                <i class="star fas fa-star" data-rating="4"></i>
                <i class="star fas fa-star" data-rating="5"></i>
              </div>
              <!-- Hidden field for storing the rating value -->
              {{ form_row(form.note_avis, {'attr': {'class': 'hidden-rating'}}) }}
            </div>

            <div class="mb-3">
              <label for="inputNom" class="form-label">Commentaire</label>
              {{ form_widget(form.commentaire_avis, {'attr': {'class': 'form-control'}}) }}
            </div>
            <input type="hidden" name="id_equipement" value="{{ equipement.getIdEquipement() }}">
            <div class="text-center">
              <button type="submit" class="btn btn-primary">Ajouter</button>
              <a href="{{ path('avis_show_front', {'id': equipement.getIdEquipement()}) }}" class="btn btn-secondary">Annuler</a>
            </div>
            {{ form_end(form) }}
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Style for star rating -->
<style>
  /* Default color of star icons */
  .star {
    color: gray; /* or any other color */
  }

  /* Selected color of star icons */
  .star.selected {
    color: yellow; /* or any other color */
  }
</style>

<!-- JavaScript for star rating -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const stars = document.querySelectorAll(".star");

    stars.forEach((star, index) => {
      star.addEventListener("click", function() {
        const rating = this.getAttribute("data-rating");

        // Highlight selected stars and preceding stars
        stars.forEach((s, i) => {
          if (i <= index) {
            s.classList.add("selected");
          } else {
            s.classList.remove("selected");
          }
        });

        // Update the value of the hidden input field
        const hiddenRating = document.querySelector(".hidden-rating");
        hiddenRating.value = rating;
      });
    });
  });
</script>
{% endblock %}
